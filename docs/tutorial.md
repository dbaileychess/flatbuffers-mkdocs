# Tutorial

This tutorial provides a basic example of how to work with FlatBuffers in the
many languages that are supported. It will cover the following topics that gives
a complete workflow using flatbuffers in your application.

1. Writing a FlatBuffers schema file (`.fbs`).
2. Using the `flatc` compiler to transform the schema into language-specific
   code.
3. Serializing data into a flatbuffer.
4. Deserializing the flatbuffer.

## FlatBuffers Schema (`.fbs`)

To start working with FlatBuffers, you first need to create a
[schema](schema.md) file which defines the format for each data structure you
wish to serialize. The schema is processed by the `flatc` compiler to generate
language-specific code that you use in your own projects for working with
FlatBuffers.

The following
[`monster.fbs`](https://github.com/google/flatbuffers/blob/master/samples/monster.fbs)
schema will be used for this tutorial, and is part of the FlatBuffers
[sample code](https://github.com/google/flatbuffers/tree/master/samples).

!!! bug "Get FlatBuffers schema syntax highlighting"

```c title="monster.fbs" linenums="1"
--8<-- "https://raw.githubusercontent.com/google/flatbuffers/master/samples/monster.fbs"
```

## Compiling Schema to Code (`flatc`)

After the schema file is written, the next step is to compile it to code in the
languages you wish to work with. This is done with the
[FlatBuffers Compiler](flatc.md) (`flatc`) which is one of the binaries built in
the repo.

### Building `flatc`

### Compiling

To compile the schema, invoke `flatc` with the schema file and the language(s)
flags you wish to generate code for. This compilation will generate file(s) that
you include in your application code to serialize and deserialize the binary
data.

=== "C++"

    ```sh
    flatc --cpp monster.fbs
    ```

=== "C#"

    ```sh
    flatc --csharp monster.fbs
    ```

!!! tip

    FlatBuffers can be deserialized in languages that differ from the language that serialized it. For purpose of this tutorial, it will assumed you will use the same language for serializing and deserializing.

## Including Generated Code in your Application

The generated files are then included/imported in your project to be built into
your application. This is heavily dependent on your building workflow, but
generally involves two things:

1. Importing the generated code from `flatc` from the schema.
2. Importing the "runtime" library for your language.

=== "C++"

    ```c
    #include "monster_generated.h" // This was generated by `flatc`
    #include "flatbuffers.h" // The runtime library for C++
    ```

=== "C#"

    ```c#
    using Google.FlatBuffers; // The runtime library for C#
    using MyGame.Sample; // The generated files from `flatc`
    ```

## Serializing Data

Once all the imports are included, its time to start serializing some data!

### FlatBufferBuilder

Serialization in most languages uses a Builder object that manages the binary
array that the data is serialized into. You first construct a new Builder (or
resuse an existing one) and allocate some memory for it. The builder will automatically resize the buffer when necessary.

=== "C++"

    ```c
    // Construct a Builder with 1024 byte backing array.
    flatbuffers::FlatBufferBuidler builder(1024);
    ```

=== "C#"

    ```c#
    // Construct a Buidler with 1024 byte backing array.
    var builder = new FlatBufferBuilder(1024);
    ```

Once a Builder is available, data can be serialized to it.

### Writing Data